<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>teadown - a Markdown Editor</title>
  <link href="http://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="assets/style.css">
  <link href="http://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-left"></div>
<div class="container-fluid full-h">
 <div class="row full-h">
    <div class="col-xs-6  full-h full-w" style="background: #ccc">
      <div id="editor"></div>
    </div>
    <div class="col-xs-6 full-h no-scroll" id="previewWin" style="background: #fff">
      <iframe id="ifPreview" src="welcome.html"></iframe>
    </div>
 </div>
</div>

<script type="text/javascript">
  window.$ = window.jQuery = require('./assets/libs/jquery');
  const {ipcRenderer} = require('electron');

  ipcRenderer.on("previewRefreshed", (evt, arg)=>{
    $("#ifPreview").attr("src", arg + "?t=" + 1*(new Date()));
  });

</script>
<script src="http://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript" src="assets/page.js"></script>
<script src="http://cdn.bootcss.com/ace/1.2.8/ace.js"></script>
<script src="http://cdn.bootcss.com/ace/1.2.8/mode-markdown.js"></script>
<script>
$(function(){

    ipcRenderer.send('docReadToEdit', '');


    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setMode("ace/mode/markdown");


    editor.on("change", (a, b)=>{
      console.log(editor.getValue());
    });

    ipcRenderer.on("docEditReaded", (evt, arg)=>{
      editor.insert(arg);
    })
});
</script>
</body>
</html>